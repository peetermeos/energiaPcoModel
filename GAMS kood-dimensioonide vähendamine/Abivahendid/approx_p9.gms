* Tee knitro solveriga
* EEJ8
* Cutoffid 
* 64/65
* 154/155
*
*      a1  a2
* --------------
* 1 0.173 0.001
* 2 0.249 2.1213e-4
* 3 0.260 1.3896e-4

Sets
  i /40*170/
  
  tykk /1*3/;
  
Scalars
  z1  /40/
  z2  /170/
;
  

Parameter kover(i)
/
$offlisting
40 0.2205,	41 0.2217,	42 0.2229,	43 0.2242,	44 0.2254,	45 0.2266,	46 0.2279,	47 0.2296,	48 0.2309,	49 0.2322,
50 0.2335,	51 0.2344,	52 0.2358,	53 0.2367,	54 0.2381,	55 0.2390,	56 0.2404,	57 0.2413,	58 0.2428,	59 0.2437,
60 0.2452,	61 0.2462,	62 0.2467,	63 0.2477,	64 0.2482,	65 0.2492,	66 0.2497,	67 0.2507,	68 0.2512,	69 0.2522,
70 0.2533,	71 0.2538,	72 0.2543,	73 0.2548,	74 0.2554,	75 0.2559,	76 0.2564,	77 0.2570,	78 0.2575,	79 0.2581,
80 0.2586,	81 0.2591,	82 0.2597,	83 0.2602,	84 0.2608,	85 0.2619,	86 0.2625,	87 0.2630,	88 0.2636,	89 0.2642,
90 0.2647,	91 0.2653,	92 0.2659,	93 0.2665,	94 0.2665,	95 0.2670,	96 0.2676,	97 0.2682,	98 0.2688,	99 0.2688,
100 0.2694,	101 0.2700,	102 0.2706,	103 0.2706,	104 0.2712,	105 0.2718,	106 0.2718,	107 0.2724,	108 0.2724,	109 0.2730,
110 0.2736,	111 0.2736,	112 0.2736,	113 0.2736,	114 0.2736,	115 0.2736,	116 0.2736,	117 0.2736,	118 0.2736,	119 0.2736,
120 0.2736,	121 0.2736,	122 0.2742,	123 0.2742,	124 0.2748,	125 0.2748,	126 0.2754,	127 0.2754,	128 0.2760,	129 0.2760,
130 0.2767,	131 0.2767,	132 0.2773,	133 0.2773,	134 0.2773,	135 0.2779,	136 0.2779,	137 0.2779,	138 0.2785,	139 0.2785,
140 0.2792,	141 0.2792,	142 0.2792,	143 0.2798,	144 0.2798,	145 0.2798,	146 0.2804,	147 0.2804,	148 0.2804,	149 0.2811,
150 0.2811,	151 0.2811,	152 0.2817,	153 0.2817,	154 0.2817,	155 0.2817,	156 0.2824,	157 0.2824,	158 0.2824,	159 0.2824,
160 0.2830,	161 0.2830,	162 0.2830,	163 0.2830,	164 0.2830,	165 0.2837,	166 0.2837,	167 0.2837,	168 0.2837,	169 0.2837,
170 0.2843																																													
$onlisting				
/;

Variables
  a1(tykk)
  a2(tykk);

Positive variables  
  kt(i)
;

Integer variables
  akt(i)
;

Free variables
  viga_kokku
;
  
Equations
  z
  y2(i)
  y3(i)
  y4(i)
  y5(i)
;

**********************
z.. viga_kokku =e= sum(i, (kt(i) - kover(i))*(kt(i) - kover(i)));

y2(i)..  akt(i) =g= 1;

y3(i)..  kt(i) =e= (a1("1") + a2("1") * (ord(i)+z1-1)) * rel_eq(akt(i), 1) +
                   (a1("2") + a2("2") * (ord(i)+z1-1)) * rel_eq(akt(i), 2) +
                   (a1("3") + a2("3") * (ord(i)+z1-1)) * rel_eq(akt(i), 3);

* Kolm taset
y4(i)..  akt(i) =l= 3;
* Eelmine tase ei tohi olla suurem kui praegune
y5(i)$(ord(i) > 1)..   akt(i-1) =l= akt(i);  


model lahend /all/;
solve lahend minimizing viga_kokku using minlp;

