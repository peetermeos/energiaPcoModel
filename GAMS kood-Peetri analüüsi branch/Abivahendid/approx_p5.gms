* Tee knitro solveriga
* EEJ5
* Cutoffid
* 95/96
* 194/195
*
*      a1  a2
* --------------
*  0.213  8.3776e-4
*  0.290  1.1390e-4
*  0.312  -3.469e-7

Sets
  i /50*196/

  tykk /1*3/;
;


Parameter kover(i)
/
$offlisting
50 0.2502,      51 0.2517,      52 0.2533,      53 0.2543,      54 0.2559,      55 0.2570,      56 0.2586,      57 0.2597,      58 0.2614,      59 0.2625,
60 0.2642,      61 0.2653,      62 0.2659,      63 0.2670,      64 0.2676,      65 0.2688,      66 0.2694,      67 0.2706,      68 0.2712,      69 0.2724,
70 0.2736,      71 0.2742,      72 0.2748,      73 0.2754,      74 0.2760,      75 0.2767,      76 0.2773,      77 0.2779,      78 0.2785,      79 0.2792,
80 0.2798,      81 0.2804,      82 0.2811,      83 0.2817,      84 0.2824,      85 0.2837,      86 0.2843,      87 0.2850,      88 0.2857,      89 0.2863,
90 0.2870,      91 0.2877,      92 0.2883,      93 0.2890,      94 0.2890,      95 0.2897,      96 0.2904,      97 0.2911,      98 0.2918,      99 0.2918,
100 0.2925,     101 0.2932,     102 0.2939,     103 0.2939,     104 0.2946,     105 0.2953,     106 0.2953,     107 0.2960,     108 0.2960,     109 0.2967,
110 0.2974,     111 0.2974,     112 0.2974,     113 0.2974,     114 0.2974,     115 0.2974,     116 0.2974,     117 0.2974,     118 0.2974,     119 0.2974,
120 0.2974,     121 0.2974,     122 0.2981,     123 0.2981,     124 0.2989,     125 0.2989,     126 0.2996,     127 0.2996,     128 0.3003,     129 0.3003,
130 0.3011,     131 0.3011,     132 0.3018,     133 0.3018,     134 0.3018,     135 0.3025,     136 0.3025,     137 0.3025,     138 0.3033,     139 0.3033,
140 0.3040,     141 0.3040,     142 0.3040,     143 0.3048,     144 0.3048,     145 0.3048,     146 0.3056,     147 0.3056,     148 0.3056,     149 0.3063,
150 0.3063,     151 0.3063,     152 0.3071,     153 0.3071,     154 0.3071,     155 0.3071,     156 0.3079,     157 0.3079,     158 0.3079,     159 0.3079,
160 0.3086,     161 0.3086,     162 0.3086,     163 0.3086,     164 0.3086,     165 0.3094,     166 0.3094,     167 0.3094,     168 0.3094,     169 0.3094,
170 0.3102,     171 0.3102,     172 0.3102,     173 0.3102,     174 0.3102,     175 0.3102,     176 0.3102,     177 0.3110,     178 0.3110,     179 0.3110,
180 0.3110,     181 0.3110,     182 0.3110,     183 0.3110,     184 0.3110,     185 0.3110,     186 0.3110,     187 0.3118,     188 0.3118,     189 0.3118,
190 0.3118,     191 0.3118,     192 0.3118,     193 0.3118,     194 0.3118,     195 0.3118,     196 0.3118

$onlisting
/;

Scalars
  z1 /50/;

Variables
  a1(tykk)
  a2(tykk);

Positive variables
  kt(i)
;

Integer variables
  akt(i)
;

Free variables
  viga_kokku
;

Equations
  z
  y2(i)
  y3(i)
  y4(i)
  y5(i)
;

**********************
z.. viga_kokku =e= sum(i, (kt(i) - kover(i))*(kt(i) - kover(i)));

y2(i)..  akt(i) =g= 1;

y3(i)..  kt(i) =e= (a1("1") + a2("1") * (ord(i)+z1-1)) * rel_eq(akt(i), 1) +
                   (a1("2") + a2("2") * (ord(i)+z1-1)) * rel_eq(akt(i), 2) +
                   (a1("3") + a2("3") * (ord(i)+z1-1)) * rel_eq(akt(i), 3);

* Kolm taset
y4(i)..  akt(i) =l= 3;
* Eelmine tase ei tohi olla suurem kui praegune
y5(i)$(ord(i) > 1)..   akt(i-1) =l= akt(i);


model lahend /all/;
solve lahend minimizing viga_kokku using minlp;

