* Tee knitro solveriga
* EEJ1
* Cutoffid
* 92/93
* 181/182
*
*      a1  a2
* --------------
* 1 0.201  9.7436e-4
* 2 0.280  1.6210e-4
* 3 0.301  -1.12e-14

Sets
  i /40*186/

  tykk /1*3/;

Scalars
  z1  /40/
  z2  /186/
;


Parameter kover(i)
/
$offlisting
40 0.2344,      41 0.2358,      42 0.2371,      43 0.2385,      44 0.2399,      45 0.2413,      46 0.2428,      47 0.2447,      48 0.2462,      49 0.2477,
50 0.2492,      51 0.2502,      52 0.2517,      53 0.2527,      54 0.2543,      55 0.2554,      56 0.2570,      57 0.2581,      58 0.2597,      59 0.2608,
60 0.2625,      61 0.2636,      62 0.2642,      63 0.2653,      64 0.2659,      65 0.2670,      66 0.2676,      67 0.2688,      68 0.2694,      69 0.2706,
70 0.2718,      71 0.2724,      72 0.2730,      73 0.2736,      74 0.2742,      75 0.2748,      76 0.2754,      77 0.2760,      78 0.2767,      79 0.2773,
80 0.2779,      81 0.2785,      82  0.2792,     83 0.2798,      84 0.2804,      85 0.2817,      86 0.2824,      87 0.2830,      88 0.2837,      89 0.2843,
90 0.2850,      91 0.2857,      92 0.2863,      93 0.2870,      94 0.2870,      95 0.2877,      96 0.2883,      97 0.2890,      98 0.2897,      99 0.2897,
100 0.2904,     101 0.2911,     102 0.2918,     103 0.2918,     104 0.2925,     105 0.2932,     106 0.2932,     107 0.2939,     108 0.2939,     109 0.2946,
110 0.2953,     111 0.2953,     112 0.2953,     113 0.2953,     114 0.2953,     115 0.2953,     116 0.2953,     117 0.2953,     118 0.2953,     119 0.2953,
120 0.2953,     121 0.2953,     122 0.2960,     123 0.2960,     124 0.2967,     125 0.2967,     126 0.2974,     127 0.2974,     128 0.2981,     129 0.2981,
130 0.2989,     131 0.2989,     132 0.2996,     133 0.2996,     134 0.2996,     135 0.3003,     136 0.3003,     137 0.3003,     138 0.3011,     139 0.3011,
140 0.3018,     141 0.3018,     142 0.3018,     143 0.3025,     144 0.3025,     145 0.3025,     146 0.3033,     147 0.3033,     148 0.3033,     149 0.3040,
150 0.3040,     151 0.3040,     152 0.3048,     153 0.3048,     154 0.3048,     155 0.3048,     156 0.3056,     157 0.3056,     158 0.3056,     159 0.3056,
160 0.3063,     161 0.3063,     162 0.3063,     163 0.3063,     164 0.3063,     165 0.3071,     166 0.3071,     167 0.3071,     168 0.3071,     169 0.3071,
170 0.3079,     171 0.3079,     172 0.3079,     173 0.3079,     174 0.3079,     175 0.3079,     176 0.3079,     177 0.3086,     178 0.3086,     179 0.3086,
180 0.3086,     181 0.3086,     182 0.3086,     183 0.3086,     184 0.3086,     185 0.3086,     186 0.3086
$onlisting
/;

Variables
  a1(tykk)
  a2(tykk);

Positive variables
  kt(i)
;

Integer variables
  akt(i)
;

Free variables
  viga_kokku
;

Equations
  z
  y2(i)
  y3(i)
  y4(i)
  y5(i)
;

**********************
z.. viga_kokku =e= sum(i, (kt(i) - kover(i))*(kt(i) - kover(i)));

y2(i)..  akt(i) =g= 1;

y3(i)..  kt(i) =e= (a1("1") + a2("1") * (ord(i)+z1-1)) * rel_eq(akt(i), 1) +
                   (a1("2") + a2("2") * (ord(i)+z1-1)) * rel_eq(akt(i), 2) +
                   (a1("3") + a2("3") * (ord(i)+z1-1)) * rel_eq(akt(i), 3);

* Kolm taset
y4(i)..  akt(i) =l= 3;
* Eelmine tase ei tohi olla suurem kui praegune
y5(i)$(ord(i) > 1)..   akt(i-1) =l= akt(i);


model lahend /all/;
solve lahend minimizing viga_kokku using minlp;

